<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta property="og:title" content="{{ if ne .Permalink "/" }}{{ .Title }} &middot; {{ end }}{{ .Site.Title }}" />
<meta property="og:site_name" content="{{ .Site.Title }}" />
<meta property="og:url" content="{{ .Permalink }}" />

{{if .Params.image }}
 <meta property="og:image" content="{{ .Params.image | relURL}}"/>
{{else}}
  {{if .Site.Params.cover}}
    <meta property="og:image" content="{{ .Site.Params.cover | relURL}}"/>
  {{end}}
{{end}}

{{ if .IsPage }}
<meta property="og:description" content="{{ .Description }}" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" | safeHTML }}" />

{{ range .Params.tags }}
<meta property="article:tag" content="{{ . }}" />
{{ end }}
{{ else }}
<meta property="og:type" content="website" />
<meta property="og:description" content="{{ .Site.Params.description }}" />
{{ end }}

<title>{{ if ne .Permalink "/" }}{{ .Title }} &middot; {{ end }}{{ .Site.Title }}</title>

{{ if .IsPage }}
<meta name="description" content="{{ .Description | default (substr .Summary 0 160) }}" />
{{ else }}
<meta name="description" content="{{ .Site.Params.metadescription | default .Site.Params.description }}" />
{{ end }}

{{ if .Keywords }}
<meta name="keywords" content="{{ delimit .Keywords "," }}" />
{{ end }}
{{ if .Params.Author }}
<meta name="author" content="{{ .Params.Author}}" />
{{ end }}
{{ hugo.Generator }}

{{ if .Site.IsServer }}
  {{ $style := resources.Get "css/styles.css" | postCSS (dict "config" "./assets/css/dev/postcss.config.js") }}
  <link rel="stylesheet" href="{{ $style.RelPermalink }}">
{{ else }}
  {{ $style := resources.Get "css/styles.css" | postCSS (dict "config" "./assets/css/postcss.config.js") | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $style.Permalink }}" integrity="{{ $style.Data.Integrity }}">
{{ end }}

{{ if .Site.Params.RelPermalink}}
<link href="{{ with .OutputFormats.Get "RSS" }} {{ .RelPermalink  }} {{ end }}" rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" />
{{else}}
  {{ if ne .Permalink "/" }}
      <link href="{{ "index.xml" | relURL}}" rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" />
  {{ end }}
  {{if .IsNode}}
  <link href="{{ with .OutputFormats.Get "RSS" }} {{ .RelPermalink }} {{ end }}" rel="alternate" type="application/rss+xml" title="{{ if ne .RelPermalink "/" }}{{ .Title }} &middot; {{ end }}{{ .Site.Title }}" />
  {{end}}
{{end}}

<link rel="canonical" href="{{ .Permalink }}" />

{{with  .Site.Params.googleAnalyticsUserID }}
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '{{.}}', 'auto');
  ga('send', 'pageview');

</script>
{{end}}
